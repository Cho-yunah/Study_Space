
# 6장 고급타입
## 1. 타입관의 관계
- 타입스크립트에는 타입간의 관계가 있다.
### 1.1 서브타입 및 슈퍼타입
- **서브타입이란,**
    두개의 타입 A와 B가 있고  B가 A의 서브타입이면 A가 필요한 곳에는 어디든 B를 안전하게 사용할 수 있다. B가 A에 속한 집합이라고 생각하면 된다.  
      <br>
    - 타입스크립트에서 기본적으로 어떤 타입관계가 있는지 간단히 정리해보면,
        any > object > array > tuple > never 이와 같은 예를 들수 있다.
        1. 모든 것은 any의 서브타입이다.
        2. 배열은 객체의 서브타입이다.
        3. 튜플은 배열의 서브타입이다.
        4. never은 모든 것의 서브타입이다.
    - 이는 다음과 같이 설명할 수 있다.
        1. any를 사용해야 하는 곳에 객체도 사용할 수 있다.
        2. 객체를 사용해야 하는 곳에 배열도 사용할 수 있다.
        3. 배열을 사용해야 하는 곳에 튜플도 사용할 수 있다.
        4. 어디에나 never은 사용할 수 있다. 
      <br>
- **슈퍼타입이란,**
    두개의 타입 A와 B가 있고 B가 A의 슈퍼타입이면 B가 필요한 곳에는 어디든 A를 안전하게 사용할 수 있다. A가 B에 속한 집합이라고 생각할수 있다.
    
    - 슈퍼타입과 서브타입은 정반대로 동작한다.


### 1.2 관계의 가변성
- 슈퍼타입이든 서브타입이든 어떤 형태를 요구할 때 건넬수 있는 타입은, 요구되는 타입에 포함된 프로퍼티 각각에 대해 '기대하는 타입'과 같거나 서브타입인 프로퍼티들을 가지고 있어야 한다. 
- 기대하는 프로퍼티 타입의 슈퍼타입인 프로퍼티가 있다면 건넬수 없다.
- 이것을 타입스크립트 형태는 그들의 프로퍼티 타입에 **공변한다** 고 말한다. 
- 정리하면 객체 B에 할당하려는 객체 A가 있다면, 객체 A의 각 프로퍼티가 객체 B의 프로퍼티에 포함된다는 조건을 만족해야 한다.- wrong

### 1.3 할당성
- 서브타입과 슈퍼타입의 관계는 모든 정적 타입언어에서 중요한 개념이다. 이것이 어떤 방식으로 동작하는지 이해를 해야 한다.
- 할당성이란 A라는 타입을 다른 B라는 타입이 필요한 곳에 사용할 수 있는지를 결정하는 타입스크립트의 규칙을 의미한다.
다음은 A를 B에 할당할 수 있는지 판단하는 타입스크립트의 규칙이다.
<br>
    - 기본 타입을 포함한 배열, 함수, 클래스 등의 열거형이 아닌 타입 

        1. A는 B의 서브타입이다.
        2. A는 any다.
        <br>
    - enum 키워드로 만드는 열거형 타입에서는 다음조건을 만족해야 한다.
        1. A는 열거형 B의 멤버다.
        2. B는 number 타입의 멤버를 최소 한개 이상 가지고 있으며 A는 number다.
<br>
- 함수 가변성 A함수가 B함수의 서브타입이 되려면 3가지 조건을 만족해야 한다.
    1. this
    2. 매개변수
    3. 반환타입

### 1.4 타입 넓히기 (type widening)
- 타입 넓히기는 타입스크립트의 타입 추론이 어떻게 동작하는지 이해하는 데 필요한 핵심 개념이다. 타입스크립트는 타입을 정밀하게 추론하기보다는 일반적으로 추론한다.
- var or let 키워드로 값을 바꿀수 있는 변수를 선언하면 그 변수의 타입이 리터럴 값에서 리터럴 값이 속한 기본 타입으로 넓혀진다. 
  ```
  let a= 'oo'  // string
  var b= 3     // number
- null과 undefined로 초기화된 변수는 any 타입으로 넓혀진다.
    null 이나 undefined로 초기화된 변수가 선언 범위를 벗어나면 TS는 좁은 타입으로 선언한다.
- 그와 반대로 const 키워드를 사용하여 as const로 선언을 하면 타입넓히기가 중지되고, readonly가 된다.
    ```
    let e =[1, {x: 2} as const] // readonly [1, {readonly x: 2}]

- 초과 프로퍼티 확인
    한 객체 타입을 다른 객체 타입에 할당할 수 있는지 확인할 때도 타입 넓히기를 이용한다.
